---
layout: post
title: 面试题56 唯一出现的数
category: LeetCode
tags:
description: 数组中只出现了一次的数
---
## 描述
一个整型数组 nums 里除两个数字之外，其他数字都出现了两次。请写程序找出这两个只出现一次的数字。要求时间复杂度是O(n)，空间复杂度是O(1)。

         

        示例 1：

        输入：nums = [4,1,4,6]
        输出：[1,6] 或 [6,1]
        示例 2：

        输入：nums = [1,2,10,4,1,4,3,3]
        输出：[2,10] 或 [10,2]

## 思路
让我们先来考虑一个比较简单的问题：

如果除了一个数字以外，其他数字都出现了两次，那么如何找到出现一次的数字？

答案很简单：全员进行异或操作即可。考虑异或操作的性质：对于两个操作数的每一位，相同结果为 0，不同结果为 1。那么在计算过程中，成对出现的数字的所有位会两两抵消为 0，最终得到的结果就是那个出现了一次的数字。

那么这一方法如何扩展到找出两个出现一次的数字呢？

如果我们可以把所有数字分成两组，使得：

1. 两个只出现一次的数字在不同的组中；

2. 相同的数字会被分到相同的组中。

那么对两个组分别进行异或操作，即可得到答案的两个数字。这是解决这个问题的关键。

那么如何实现这样的分组呢？

假设不同的数为a和b，先将所有数进行异或操作，找到异或结果中第一位1，假设为i，也就是说a和b在第i位上是不同的，将第i位为0的数分进第一组，其余数分进第二组，这样就能保证上述的两个条件。两组数分别异或操作，得到的两个结果就是答案。

      public int[] singleNumbers(int[] nums) {
             int sum=0;
             //将数组所有元素进行异或，最后的结果一定是那两个单一数字的异或结果。看上图示例
             //用示例[4,4,6,1]最后的抑或结果就是 6和1异或的结果 7
             for (int i = 0; i <nums.length ; i++) {
                 sum^=nums[i];
             }
             int first = 1;
             //通过与运算找到result第一个不为0的首位，7=>0111，也就是第一位
             while((sum&first)==0){
                 first=first<<1;
             }
             //first为1，所以我们可以根据数组元素的二进制低位第一位是否为1，将数组分为2类，
             // 示例数组可以分为     低位第一位为0：[4,4,6]     低位第一位为1：[1]
             //此时再将两个数组两两异或就可以得到最终结果。
             int result[]=new int[2];
             for(int i=0;i<nums.length;i++){
                 //将数组分类。
                 if((nums[i]&first)==0){
                     result[0]^=nums[i];
                 }
                 else{
                     result[1]^=nums[i];
                 }
             }
             return result;
         }

## 位操作
#### 位异或运算（^）

运算规则是：两个数转为二进制，然后从高位开始比较，如果相同则为0，不相同则为1。

#### 位与运算符（&）

运算规则：两个数都转为二进制，然后从高位开始比较，如果两个数都为1则为1，否则为0。

#### 位或运算符（|）

运算规则：两个数都转为二进制，然后从高位开始比较，两个数只要有一个为1则为1，否则就为0。

#### 位非运算符（~）

运算规则：如果位为0，结果是1，如果位为1，结果是0.

#### 左移（<<）

左边最高位丢弃，右边补齐0;

#### 右移（>>）
最高位是0，左边补齐0；最高为是1，左边补齐1；    
右移的规则只记住一点：符号位不变，左边补上符号位。

![位运算符细节](/img/位运算符细节.png)
